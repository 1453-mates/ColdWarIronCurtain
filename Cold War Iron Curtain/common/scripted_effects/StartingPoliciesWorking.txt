policy_replanning = {
	
	if = {
		limit = {
			is_ai = yes
		}
		starting_policies = yes
	}
}
starting_policies = {
	
	clear_all_policies = yes
	if = {
		limit = {
			NOT = {
				has_country_flag = flag_default_social_set
			}
		}
		default_social_policies = yes
	}
	
	set_variable = { planning_census = 0 }
	add_to_variable = { planning_census = .001 }
	
	set_variable = { battalion_tier_1 = num_battalions_with_type@direct_fire_gun }
	add_to_variable = { battalion_tier_1 = num_battalions_with_type@militia }
	add_to_variable = { battalion_tier_1 = num_battalions_with_type@signal_company }

	multiply_variable = { battalion_tier_1 = 0.01 }

	set_variable = { battalion_tier_2 = num_battalions_with_type@infantry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@auto_cannon }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_artillery }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_sp_artillery }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@mountaineers }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@cavalry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@motorized_infantry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@recon }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@logistics_company }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_artillery_support }

	multiply_variable = { battalion_tier_2 = 0.05 }

	set_variable = { battalion_tier_3 = num_battalions_with_type@spaag }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@atgm }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@sp_artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@heavy_artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@light_armor }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@marine }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@airborne }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@ff1 }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@mechanized_infantry }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@recon_mechanized }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@artillery_support }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@heavy_artillery_support }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@military_police }

	multiply_variable = { battalion_tier_3 = 0.075 }

	set_variable = { battalion_tier_4 = num_battalions_with_type@sam_carrier }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@atgm_carrier }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@heavy_sp_artillery }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@medium_armor }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@mechanized_marine }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@mechanized_airborne }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@armored_infantry }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@air_cavalry }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@engineer }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@recon_helicopter }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@maintenance_company }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@field_hospital }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@army_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@navy_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@airforce_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@logistics_helicopter }

	multiply_variable = { battalion_tier_4 = 0.1 }

	set_variable = { battalion_tier_5 = num_battalions_with_type@attack_helicopter_support }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@rocket_sp_artillery }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@heavy_armor }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@super_heavy_armor }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@armored_engineers }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@helicopter_medical_support }

	multiply_variable = { battalion_tier_5 = 0.15 }

	add_to_variable = { planning_census = battalion_tier_1 }
	add_to_variable = { planning_census = battalion_tier_2 }
	add_to_variable = { planning_census = battalion_tier_3 }
	add_to_variable = { planning_census = battalion_tier_4 }
	add_to_variable = { planning_census = battalion_tier_5 }
	every_owned_state = {
		add_to_variable = { ROOT.planning_census = state_population_k }
	}
	set_variable = { policy_replanning_ratio = 0 }
	set_variable = { policy_replanning_ratio = IncomePlannerCheck }
	multiply_variable = { policy_replanning_ratio = 0.6 } #COST DIVIDER +0.1
	
	round_variable = planning_census
	divide_variable = { policy_replanning_ratio = planning_census }
	#Planning ratio is the amount of dynamic units of cash you can spend per month on policies
	if = {
		limit = {
			OR = {
				check_variable = { policy_replanning_ratio = 0 }
				check_variable = { policy_replanning_ratio = 3.33 }
				check_variable = { policy_replanning_ratio = 8.4 }
				check_variable = { policy_replanning_ratio = 12.8 }
				check_variable = { policy_replanning_ratio = 18.2 }
				check_variable = { policy_replanning_ratio = 26.2 }
			}
		}
		add_to_variable = { policy_replanning_ratio = 0.01 }
	}
	
	if = {
		limit = {
			check_variable = { policy_replanning_ratio < 3.33 }
		}
		policy_plan_0 = yes
	}
	if = {
		limit = {
			AND = {
				check_variable = { policy_replanning_ratio > 3.33 }
				check_variable = { policy_replanning_ratio < 8.4 }
			}
		}
		policy_plan_1 = yes
	}
	if = {
		limit = {
			AND = {
				check_variable = { policy_replanning_ratio > 8.4 }
				check_variable = { policy_replanning_ratio < 12.8 }
			}
		}
		policy_plan_2 = yes
	}
	if = {
		limit = {
			AND = {
				check_variable = { policy_replanning_ratio > 12.8 }
				check_variable = { policy_replanning_ratio < 18.2 }
			}
		}
		policy_plan_3 = yes
	}
	if = {
		limit = {
			AND = {
				check_variable = { policy_replanning_ratio > 18.2 }
				check_variable = { policy_replanning_ratio < 26.8 }
			}
		}
		policy_plan_4 = yes
	}
	if = {
		limit = {
			check_variable = { policy_replanning_ratio > 26.8 }
		}
		policy_plan_5 = yes
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = Austrian_Taxation
					has_idea = Light_Taxation
					has_idea = Moderate_Taxation
					has_idea = Progressive_Taxation
					has_idea = Heavy_Taxation
					has_idea = Marxist_Taxation
				}
			}
		}
		add_ideas = Moderate_Taxation
	}
}

policy_plan_0 = { #total cost = none
	add_ideas = policy_military_temp_1
	add_ideas = policy_welfare_temp_0
	add_ideas = policy_cpi_temp_0
	add_ideas = policy_education_temp_0
	add_ideas = policy_healthcare_temp_0
	add_ideas = policy_services_temp_0
}
policy_plan_1 = { #total cost = 3.33
	add_ideas = policy_military_temp_1
	add_ideas = policy_welfare_temp_1
	add_ideas = policy_cpi_temp_0
	add_ideas = policy_education_temp_1
	add_ideas = policy_healthcare_temp_1
	add_ideas = policy_services_temp_1
}
policy_plan_2 = { #total cost = 8.4
	add_ideas = policy_military_temp_2
	add_ideas = policy_welfare_temp_2
	add_ideas = policy_cpi_temp_2
	add_ideas = policy_education_temp_2
	add_ideas = policy_healthcare_temp_2
	add_ideas = policy_services_temp_1
}
policy_plan_3 = { #total cost = 12.8
	add_ideas = policy_military_temp_2
	add_ideas = policy_welfare_temp_3
	add_ideas = policy_cpi_temp_2
	add_ideas = policy_education_temp_3
	add_ideas = policy_healthcare_temp_3
	add_ideas = policy_services_temp_2
}
policy_plan_4 = { #total cost = 18.2
	add_ideas = policy_military_temp_3
	add_ideas = policy_welfare_temp_4
	add_ideas = policy_cpi_temp_4
	add_ideas = policy_education_temp_3
	add_ideas = policy_healthcare_temp_4
	add_ideas = policy_services_temp_2
}
policy_plan_5 = { #total cost = 26.2
	add_ideas = policy_military_temp_3
	add_ideas = policy_welfare_temp_4
	add_ideas = policy_cpi_temp_5
	add_ideas = policy_education_temp_4
	add_ideas = policy_healthcare_temp_4
	add_ideas = policy_services_temp_3
}

clear_all_policies = {
	remove_ideas = policy_military_temp_0
	remove_ideas = policy_military_temp_1
	remove_ideas = policy_military_temp_2
	remove_ideas = policy_military_temp_3
	remove_ideas = policy_military_temp_4
	remove_ideas = policy_military_temp_5
	
	remove_ideas = policy_welfare_temp_0
	remove_ideas = policy_welfare_temp_1
	remove_ideas = policy_welfare_temp_2
	remove_ideas = policy_welfare_temp_3
	remove_ideas = policy_welfare_temp_4
	remove_ideas = policy_welfare_temp_5
	
	remove_ideas = policy_cpi_temp_0
	remove_ideas = policy_cpi_temp_1
	remove_ideas = policy_cpi_temp_2
	remove_ideas = policy_cpi_temp_3
	remove_ideas = policy_cpi_temp_4
	remove_ideas = policy_cpi_temp_5
	
	remove_ideas = policy_education_temp_0
	remove_ideas = policy_education_temp_1
	remove_ideas = policy_education_temp_2
	remove_ideas = policy_education_temp_3
	remove_ideas = policy_education_temp_4
	
	remove_ideas = policy_healthcare_temp_0
	remove_ideas = policy_healthcare_temp_1
	remove_ideas = policy_healthcare_temp_2
	remove_ideas = policy_healthcare_temp_3
	remove_ideas = policy_healthcare_temp_4
	remove_ideas = policy_healthcare_temp_5
	
	remove_ideas = policy_services_temp_0
	remove_ideas = policy_services_temp_1
	remove_ideas = policy_services_temp_2
	remove_ideas = policy_services_temp_3
}

default_social_policies = {
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = Oppressive
					has_idea = Repressive
					has_idea = Segregated
					has_idea = Equal_Rights
				}
			}
		}
		add_ideas = Repressive
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = Patriarchy
					has_idea = Cognitive_Patriarchy
					has_idea = Traditional
					has_idea = Womens_Rights_Policy
					has_idea = Equality
					has_idea = Positive_Action
				}
			}
		}
		add_ideas = Traditional
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = State_Press
					has_idea = Regulated_Press
					has_idea = State_Shareholder
					has_idea = Free_Press
					has_idea = Corporate_Press
				}
			}
		}
		add_ideas = State_Press
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = State_Theocracy
					has_idea = state_religion
					has_idea = moralism
					has_idea = pluarlism
					has_idea = secularism
					has_idea = atheist_state
				}
			}
		}
		add_ideas = moralism
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = No_Voting
					has_idea = Elites_Only
					has_idea = Restricted_Voting
					has_idea = Universal_Sufferage
				}
			}
		}
		add_ideas = Restricted_Voting
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_idea = gen_notsaga_1
					has_idea = gen_notsaga_2
					has_idea = gen_semighey_1
					has_idea = gen_semighey_2
					has_idea = gen_ghey_1
					has_idea = gen_ghey_2
				}
			}
		}
		add_ideas = gen_notsaga_2
	}
	
	set_country_flag = flag_default_social_set
}