income_effect = {
	miitary_expenditure = yes
	welfare_expenditure = yes
	cpi_expenditure = yes
	edu_expenditure = yes
	health_expenditure = yes
	
	every_owned_state = {
		add_to_variable = { ROOT.industrial_complex_total = building_level@industrial_complex }  
		add_to_variable = { ROOT.farm_total = building_level@agri_industrial_complex }
		add_to_variable = { ROOT.dockyard_total = building_level@dockyard }
		add_to_variable = { ROOT.oil_refinery_total = building_level@synthetic_refinery }
		add_to_variable = { ROOT.steel_works_total = building_level@steel_factory }
		add_to_variable = { ROOT.tungsten_factory_total = building_level@tungsten_factory }
		
		add_to_variable = { ROOT.office_park_total = building_level@office_park }	#+2
	}
	#industrial_complex Modifiers
	if = {
		limit = {
			has_tech = production_efficiency_I
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_II
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_III
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_IV
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_V
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_VI
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_VII
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_VIII
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_IX
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	production_efficiency_X
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	industrial_robots_I
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	industrial_robots_II
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	industrial_robots_III
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	industrial_robots_IV
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	industrial_robots_V
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	factory_automation_I
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	factory_automation_II
		}
		multiply_variable = { industrial_complex_total = 1.05 }
	}
	add_to_variable = { IncomeTotal = industrial_complex_total }
	
	#agri_industrial_complex
	if = {
		limit = {
			has_tech = 	agriculture_I
		}
		multiply_variable = { farm_total = 1.15 }
	}

	if = {
		limit = {
			has_tech = 	agriculture_I
		}
		multiply_variable = { farm_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	agriculture_II
		}
		multiply_variable = { farm_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	agriculture_III
		}
		multiply_variable = { farm_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	agriculture_IV
		}
		multiply_variable = { farm_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	agriculture_V
		}
		multiply_variable = { farm_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	agriculture_VI
		}
		multiply_variable = { farm_total = 1.15 }
	}
	add_to_variable = { IncomeTotal = farm_total }
	
	#dockyard
	if = {
		limit = {
			has_tech = 	logistics_I
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_II
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_III
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_IV_A
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_IV_B
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_XII
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_V_A
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_V_B
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_VI
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_VII_A
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_VII_B
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_VIII_A
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_VIII_B
		}
		multiply_variable = { dockyard_total = 1.05 }
	}	
	if = {
		limit = {
			has_tech = 	logistics_IX
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_X
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	if = {
		limit = {
			has_tech = 	logistics_XII
		}
		multiply_variable = { dockyard_total = 1.05 }
	}
	add_to_variable = { IncomeTotal = dockyard_total }

	#synthetic_refinery +15%	
	if = {
		limit = {
			has_tech = 	ww_oil
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	plastics_I
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	plastics_II
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	plastics_III
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	plastics_IV
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}	
	if = {
		limit = {
			has_tech = 	plastics_V
		}
		multiply_variable = { oil_refinery_total = 1.15 }
	}
	add_to_variable = { IncomeTotal = oil_refinery_total }
	
	#steel_factory +15%			steel_works_total
	if = {
		limit = {
			has_tech = 	materials_I
		}
		multiply_variable = { steel_works_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	materials_II
		}
		multiply_variable = { steel_works_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	materials_III
		}
		multiply_variable = { steel_works_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	materials_IV
		}
		multiply_variable = { steel_works_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	materials_V
		}
		multiply_variable = { steel_works_total = 1.15 }
	}	
	if = {
		limit = {
			has_tech = 	materials_VI
		}
		multiply_variable = { steel_works_total = 1.15 }
	}
	add_to_variable = { IncomeTotal = steel_works_total }

	#tungsten_factory +15%		tungsten_factory_total
	if = {
		limit = {
			has_tech = 	chemistry_I
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	chemistry_II
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	chemistry_III
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	chemistry_IV
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	chemistry_V
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}	
	if = {
		limit = {
			has_tech = 	chemistry_VI
		}
		multiply_variable = { tungsten_factory_total = 1.15 }
	}
	add_to_variable = { IncomeTotal = tungsten_factory_total }

	#office_park x2 +15%		office_park_total
	multiply_variable = { office_park_total = 2 }
	if = {
		limit = {
			has_tech = 	consumer_electronics_I
		}
		multiply_variable = { office_park_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	consumer_electronics_II
		}
		multiply_variable = { office_park_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	consumer_electronics_III
		}
		multiply_variable = { office_park_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	consumer_electronics_IV
		}
		multiply_variable = { office_park_total = 1.15 }
	}
	if = {
		limit = {
			has_tech = 	consumer_electronics_V
		}
		multiply_variable = { office_park_total = 1.15 }
	}	
	if = {
		limit = {
			has_tech = 	consumer_electronics_VI
		}
		multiply_variable = { office_park_total = 1.15 }
	}
	add_to_variable = { IncomeTotal = office_park_total }
	
	subtract_from_variable = { IncomeTotal = paigc_funding }
	subtract_from_variable = { IncomeTotal = mil_expend }
	subtract_from_variable = { IncomeTotal = welfare_cost }
	subtract_from_variable = { IncomeTotal = cpi_cost }
	subtract_from_variable = { IncomeTotal = edu_cost }	
	subtract_from_variable = { IncomeTotal = health_cost }	
	subtract_from_variable = { IncomeTotal = pub_cost }	
	subtract_from_variable = { IncomeTotal = public_expenditure }	
	
	
	add_to_variable = { currentMoney = IncomeTotal }
	if = {
		limit = {
			check_variable = { currentDebt > 1 }
		}
		clear_variable = currentDebt
		clear_variable = debtPayment
	}
	subtract_from_variable = {
		currentMoney = debtPayment
	}
	subtract_from_variable = {
		currentDebt = debtPayment
	}

	
	set_variable = { IncomeTotal = 0 }
	set_variable = { ROOT.industrial_complex_total = 0 }  
	set_variable = { ROOT.farm_total = 0 }
	set_variable = { ROOT.dockyard_total = 0 }
	set_variable = { ROOT.oil_refinery_total = 0 }
	set_variable = { ROOT.steel_works_total = 0 }
	set_variable = { ROOT.tungsten_factory_total = 0 }
	set_variable = { ROOT.office_park_total = 0 }
}

miitary_expenditure = {
	set_variable = { battalion_tier_1 = num_battalions_with_type@direct_fire_gun }
	add_to_variable = { battalion_tier_1 = num_battalions_with_type@militia }
	add_to_variable = { battalion_tier_1 = num_battalions_with_type@signal_company }

	multiply_variable = { battalion_tier_1 = 0.01 }

	set_variable = { battalion_tier_2 = num_battalions_with_type@infantry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@auto_cannon }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_artillery }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_sp_artillery }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@mountaineers }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@cavalry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@motorized_infantry }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@recon }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@logistics_company }
	add_to_variable = { battalion_tier_2 = num_battalions_with_type@light_artillery_support }

	multiply_variable = { battalion_tier_2 = 0.05 }

	set_variable = { battalion_tier_3 = num_battalions_with_type@spaag }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@atgm }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@sp_artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@heavy_artillery }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@light_armor }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@marine }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@airborne }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@ff1 }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@mechanized_infantry }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@recon_mechanized }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@artillery_support }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@heavy_artillery_support }
	add_to_variable = { battalion_tier_3 = num_battalions_with_type@military_police }

	multiply_variable = { battalion_tier_3 = 0.075 }

	set_variable = { battalion_tier_4 = num_battalions_with_type@sam_carrier }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@atgm_carrier }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@heavy_sp_artillery }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@medium_armor }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@mechanized_marine }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@mechanized_airborne }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@armored_infantry }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@air_cavalry }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@engineer }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@recon_helicopter }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@maintenance_company }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@field_hospital }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@army_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@navy_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@airforce_special_force }
	add_to_variable = { battalion_tier_4 = num_battalions_with_type@logistics_helicopter }

	multiply_variable = { battalion_tier_4 = 0.1 }

	set_variable = { battalion_tier_5 = num_battalions_with_type@attack_helicopter_support }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@rocket_sp_artillery }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@heavy_armor }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@super_heavy_armor }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@armored_engineers }
	add_to_variable = { battalion_tier_5 = num_battalions_with_type@helicopter_medical_support }

	multiply_variable = { battalion_tier_5 = 0.15 }

	set_variable = { mil_expend = 0 }
	add_to_variable = { mil_expend = battalion_tier_1 }
	add_to_variable = { mil_expend = battalion_tier_2 }
	add_to_variable = { mil_expend = battalion_tier_3 }
	add_to_variable = { mil_expend = battalion_tier_4 }
	add_to_variable = { mil_expend = battalion_tier_5 }


	if = {
		limit = {
			has_idea = policy_military_temp_0
		}
		multiply_variable = { mil_expend = 0.25 }
	}
	if = {
		limit = {
			has_idea = policy_military_temp_1
		}
		multiply_variable = { mil_expend = 0.4 }
	}
	if = {
		limit = {
			has_idea = policy_military_temp_3
		}
		multiply_variable = { mil_expend = 1.25 }
	}
	if = {
		limit = {
			has_idea = policy_military_temp_4
		}
		multiply_variable = { mil_expend = 1.4 }
	}
	if = {
		limit = {
			has_idea = policy_military_temp_5
		}
		multiply_variable = { mil_expend = 1.6 }
	}
}	
welfare_expenditure = {
	set_variable = { welfare_cost = 0 }
	every_owned_state = {
		add_to_variable = { ROOT.welfare_cost = state_population_k }
	}
	if = {
		limit = {
			has_idea = policy_welfare_temp_0
		}
		multiply_variable = { welfare_cost = 0 }
	}
	if = {
		limit = {
			has_idea = policy_welfare_temp_1
		}
		multiply_variable = { welfare_cost = 0.1 }
	}
	if = {
		limit = {
			has_idea = policy_welfare_temp_2
		}
		multiply_variable = { welfare_cost = 0.25 }
	}
	if = {
		limit = {
			has_idea = policy_welfare_temp_3
		}
		multiply_variable = { welfare_cost = 0.5 }
	}
	if = {
		limit = {
			has_idea = policy_welfare_temp_5
		}
		multiply_variable = { welfare_cost = 1.5 }
	}
}
cpi_expenditure = {
	set_variable = { cpi_cost = 0 }
	every_owned_state = {
		add_to_variable = { ROOT.cpi_cost = state_population_k }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_0
		}
		multiply_variable = { cpi_cost = 0 }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_1
		}
		multiply_variable = { cpi_cost = 0.1 }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_2
		}
		multiply_variable = { cpi_cost = 0.2 }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_3
		}
		multiply_variable = { cpi_cost = 0.3 }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_4
		}
		multiply_variable = { cpi_cost = 0.4 }
	}
	if = {
		limit = {
			has_idea = policy_cpi_temp_5
		}
		multiply_variable = { cpi_cost = 1.5 }
	}
}
edu_expenditure = {
	set_variable = { edu_cost = 0 }
	every_owned_state = {
		add_to_variable = { ROOT.edu_cost = state_population_k }
	}
	if = {
		limit = {
			has_idea = policy_education_temp_0
		}
		multiply_variable = { edu_cost = 0 }
	}
	if = {
		limit = {
			has_idea = policy_education_temp_1
		}
		multiply_variable = { edu_cost = 0.25 }
	}
	if = {
		limit = {
			has_idea = policy_education_temp_2
		}
		multiply_variable = { edu_cost = 0.5 }
	}
	if = {
		limit = {
			has_idea = policy_education_temp_3
		}
		multiply_variable = { edu_cost = 1 }
	}
	if = {
		limit = {
			has_idea = policy_education_temp_4
		}
		multiply_variable = { edu_cost = 1.25 }
	}

}
health_expenditure = {
	set_variable = { health_cost = 0 }
	every_owned_state = {
		add_to_variable = { ROOT.health_cost = state_population_k }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_0
		}
		multiply_variable = { health_cost = 0 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_1
		}
		multiply_variable = { health_cost = 0.25 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_2
		}
		multiply_variable = { health_cost = 0.5 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_3
		}
		multiply_variable = { health_cost = 0.75 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_4
		}
		multiply_variable = { health_cost = 1 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_5
		}
		multiply_variable = { health_cost = 1.25 }
	}
}
public_expenditure = {
	set_variable = { pub_cost = 0 }
	every_owned_state = {
		add_to_variable = { ROOT.pub_cost = state_population_k }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_0
		}
		multiply_variable = { pub_cost = 0 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_1
		}
		multiply_variable = { pub_cost = 0.2 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_2
		}
		multiply_variable = { pub_cost = 0.4 }
	}
	if = {
		limit = {
			has_idea = policy_healthcare_temp_3
		}
		multiply_variable = { pub_cost = 0.60 }
	}

}
