break_coalition = {
	clr_country_flag = has_coalition
	
	clr_country_flag = coalition_islamism					#islamist
	clr_country_flag = coalition_fascism					#fascist
	clr_country_flag = coalition_nationalism				#nationalist
	clr_country_flag = coalition_monarchism					#monarchist
	clr_country_flag = coalition_neutrality					#reactionary
	clr_country_flag = coalition_conservative				#conservative
	clr_country_flag = coalition_Liberal_Conservatism		#market_liberal
	clr_country_flag = coalition_Social_Liberalism			#social_liberal
	clr_country_flag = coalition_Social_Democratic			#social_democrat
	clr_country_flag = coalition_democratic					#progressive
	clr_country_flag = coalition_socialist					#socialist
	clr_country_flag = coalition_communism					#communist
	
	clr_country_flag = coalition_Christian_Democratic
	clr_country_flag = coalition_centrist
	clr_country_flag = coalition_liberal
	clr_country_flag = coalition_trotskyism
	clr_country_flag = coalition_maoism
	clr_country_flag = coalition_radical_shiaism
	clr_country_flag = coalition_Salafism
	
	clear_variable = ROOT.Coalition
}

update_coalition = {
	set_variable = {
		var = ROOT.Coalition
		value = 0
	}
	if = {
		limit = {
			has_country_flag = coalition_islamism
		}
		add_to_variable = { ROOT.Coalition = islamism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_fascism
		}
		add_to_variable = { ROOT.Coalition = fascism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_nationalism
		}
		add_to_variable = { ROOT.Coalition = nationalism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_monarchism
		}
		add_to_variable = { ROOT.Coalition = monarchism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_neutrality
		}
		add_to_variable = { ROOT.Coalition = neutrality_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_conservative
		}
		add_to_variable = { ROOT.Coalition = conservative_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Liberal_Conservatism
		}
		add_to_variable = { ROOT.Coalition = Liberal_Conservatism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Social_Liberalism
		}
		add_to_variable = { ROOT.Coalition = Social_Liberalism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Social_Democratic
		}
		add_to_variable = { ROOT.Coalition = Social_Democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_democratic
		}
		add_to_variable = { ROOT.Coalition = democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_socialist
		}
		add_to_variable = { ROOT.Coalition = socialist_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_communism
		}
		add_to_variable = { ROOT.Coalition = communism_seats }
	}
	multiply_variable = { ROOT.Coalition = 100 }

	if = {
		limit = {
			has_country_flag = coalition_Christian_Democratic
		}
		add_to_variable = { ROOT.Coalition = Christian_Democratic_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_centrist
		}
		add_to_variable = { ROOT.Coalition = centrist_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_liberal
		}
		add_to_variable = { ROOT.Coalition = liberal_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_trotskyism
		}
		add_to_variable = { ROOT.Coalition = trotskyism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_maoism
		}
		add_to_variable = { ROOT.Coalition = maoism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_radical_shiaism
		}
		add_to_variable = { ROOT.Coalition = radical_shiaism_seats }
	}
	if = {
		limit = {
			has_country_flag = coalition_Salafism
		}
		add_to_variable = { ROOT.Coalition = Salafism_seats }
	}	
	if = {
		limit = {
			NOT = { has_country_flag = has_coalition }
		}
		break_coalition = yes
	}
}

cleanup_coalition = {
	clr_country_flag = government_chosen
	
	clr_country_flag = government_islamism
	clr_country_flag = government_fascism
	clr_country_flag = government_nationalism
	clr_country_flag = government_monarchism
	clr_country_flag = government_neutrality
	clr_country_flag = government_conservative
	clr_country_flag = government_Liberal_Conservatism
	clr_country_flag = government_Social_Liberalism
	clr_country_flag = government_Social_Democratic
	clr_country_flag = government_democratic
	clr_country_flag = government_socialist
	clr_country_flag = government_communism
	
	clr_country_flag = government_Christian_Democratic
	clr_country_flag = government_centrist
	clr_country_flag = government_liberal
	clr_country_flag = government_trotskyism
	clr_country_flag = government_maoism
	clr_country_flag = government_radical_shiaism
	clr_country_flag = government_Salafism
	
	clr_country_flag = coalition_chosen
	clear_variable = ROOT.NewCoalition
}
}
quickset_parliament = {
	set_variable = { communism_seats = party_popularity@communism }
	multiply_variable = { communism_seats = 100 }
	set_variable = { socialist_seats = party_popularity@socialist }
	multiply_variable = { socialist_seats = 100 }
	set_variable = { democratic_seats = party_popularity@democratic }
	multiply_variable = { democratic_seats = 100 }
	set_variable = { Social_Democratic_seats = party_popularity@Social_Democratic }
	multiply_variable = { Social_Democratic_seats = 100 }
	set_variable = { Social_Liberalism_seats = party_popularity@Social_Liberalism }
	multiply_variable = { Social_Liberalism_seats = 100 }
	set_variable = { Liberal_Conservatism_seats = party_popularity@Liberal_Conservatism }
	multiply_variable = { Liberal_Conservatism_seats = 100 }
	set_variable = { conservative_seats = party_popularity@conservative }
	multiply_variable = { conservative_seats = 100 }
	set_variable = { neutrality_seats = party_popularity@neutrality }
	multiply_variable = { neutrality_seats = 100 }
	set_variable = { monarchism_seats = party_popularity@monarchism }
	multiply_variable = { monarchism_seats = 100 }
	set_variable = { nationalism_seats = party_popularity@nationalism }
	multiply_variable = { nationalism_seats = 100 }
	set_variable = { fascism_seats = party_popularity@fascism }
	multiply_variable = { fascism_seats = 100 }
	set_variable = { islamism_seats = party_popularity@islamism }
	multiply_variable = { islamism_seats = 100 }
	
	set_variable = { Christian_Democratic_seats = party_popularity@Christian_Democratic }
	multiply_variable = { Christian_Democratic_seats = 100 }
	set_variable = { centrist_seats = party_popularity@centrist }
	multiply_variable = { centrist_seats = 100 }
	set_variable = { liberal_seats = party_popularity@liberal }
	multiply_variable = { liberal_seats = 100 }
	set_variable = { trotskyism_seats = party_popularity@trotskyism }
	multiply_variable = { trotskyism_seats = 100 }
	set_variable = { maoism_seats = party_popularity@maoism }
	multiply_variable = { maoism_seats = 100 }
	set_variable = { radical_shiaism_seats = party_popularity@radical_shiaism }
	multiply_variable = { radical_shiaism_seats = 100 }
	set_variable = { Salafism_seats = party_popularity@Salafism }
	multiply_variable = { Salafism_seats = 100 }
	set_parliament_graphics = yes
}


quickset_coalition = {
    set_country_flag = has_coalition
	if = {
		limit = {
			has_government = communism
		}
		set_country_flag = coalition_communism
        add_to_variable = { ROOT.Coalition = communism_seats }
	}
	if = {
		limit = {
			has_government = socialist
		}
		set_country_flag = coalition_socialist
        add_to_variable = { ROOT.Coalition = socialist_seats }
	}
	if = {
		limit = {
			has_government = democratic
		}
		set_country_flag = coalition_democratic
        add_to_variable = { ROOT.Coalition = democratic_seats }
	}
	if = {
		limit = {
			has_government = Social_Democratic
		}
		set_country_flag = coalition_Social_Democratic
        add_to_variable = { ROOT.Coalition = Social_Democratic_seats }
	}
	if = {
		limit = {
			has_government = Social_Liberalism
		}
		set_country_flag = coalition_Social_Liberalism
        add_to_variable = { ROOT.Coalition = Social_Liberalism_seats }
	}
	if = {
		limit = {
			has_government = Liberal_Conservatism
		}
		set_country_flag = coalition_Liberal_Conservatism
        add_to_variable = { ROOT.Coalition = Liberal_Conservatism_seats }
	}
	if = {
		limit = {
			has_government = conservative
		}
		set_country_flag = coalition_conservative
        add_to_variable = { ROOT.Coalition = conservative_seats }
	}
	if = {
		limit = {
			has_government = neutrality
		}
		set_country_flag = coalition_neutrality
        add_to_variable = { ROOT.Coalition = neutrality_seats }
	}
	if = {
		limit = {
			has_government = monarchism
		}
		set_country_flag = coalition_monarchism
        add_to_variable = { ROOT.Coalition = monarchism_seats }
	}
	if = {
		limit = {
			has_government = nationalism
		}
		set_country_flag = coalition_nationalism
        add_to_variable = { ROOT.Coalition = nationalism_seats }
	}
	if = {
		limit = {
			has_government = fascism
		}
		set_country_flag = coalition_fascism
        add_to_variable = { ROOT.Coalition = fascism_seats }
	}
	if = {
		limit = {
			has_government = islamism
		}
		set_country_flag = coalition_islamism
        add_to_variable = { ROOT.Coalition = islamism_seats }
	}
	
	if = {
		limit = {
			has_government = Christian_Democratic
		}
		set_country_flag = coalition_Christian_Democratic
        add_to_variable = { ROOT.Coalition = Christian_Democratic_seats }
	}
	if = {
		limit = {
			has_government = centrist
		}
		set_country_flag = coalition_centrist
        add_to_variable = { ROOT.Coalition = centrist_seats }
	}
	if = {
		limit = {
			has_government = liberal
		}
		set_country_flag = coalition_liberal
        add_to_variable = { ROOT.Coalition = liberal_seats }
	}
	if = {
		limit = {
			has_government = trotskyism
		}
		set_country_flag = coalition_trotskyism
        add_to_variable = { ROOT.Coalition = trotskyism_seats }
	}
	if = {
		limit = {
			has_government = maoism
		}
		set_country_flag = coalition_maoism
        add_to_variable = { ROOT.Coalition = maoism_seats }
	}
	if = {
		limit = {
			has_government = radical_shiaism
		}
		set_country_flag = coalition_radical_shiaism
        add_to_variable = { ROOT.Coalition = radical_shiaism_seats }
	}
	if = {
		limit = {
			has_government = Salafism
		}
		set_country_flag = coalition_radical_Salafism
        add_to_variable = { ROOT.Coalition = Salafism_seats }
	}
}

set_parliament_graphics = {

## CLARIFICATION
# Every ideology has a number from 1 to 12.
# There will be a parliament array with 25 entries of numbers reaching from 1 to 12, each defining a seat for a certain ideology.
# It involves a huge amount of code, I hope it won't kill the performance
#
## Step 1 : Create new variables to work with
	set_variable = { communism_seats_parliament = communism_seats }
	set_variable = { socialist_seats_parliament = socialist_seats }
	set_variable = { Social_Democratic_seats_parliament = Social_Democratic_seats }
	set_variable = { democratic_seats_parliament = democratic_seats }
	set_variable = { Social_Liberalism_seats_parliament = Social_Liberalism_seats }
	set_variable = { Liberal_Conservatism_seats_parliament = Liberal_Conservatism_seats }
	set_variable = { conservative_seats_parliament = conservative_seats }
	set_variable = { islamism_seats_parliament = islamism_seats }
	set_variable = { monarchism_seats_parliament = monarchism_seats }
	set_variable = { neutrality_seats_parliament = neutrality_seats }
	set_variable = { nationalism_seats_parliament = nationalism_seats }
	set_variable = { fascism_seats_parliament = fascism_seats }
	
	set_variable = { Christian_Democratic_seats_parliament = Christian_Democratic_seats }
	set_variable = { centrist_seats_parliament = centrist_seats }
	set_variable = { liberal_seats_parliament = liberal_seats }
	set_variable = { trotskyism_seats_parliament = trotskyism_seats }
	set_variable = { maoism_seats_parliament = maoism_seats }
	set_variable = { radical_shiaism_seats_parliament = radical_shiaism_seats }
	set_variable = { Salafism_seats_parliament = Salafism_seats }

## Step 2 : Round variables

	round_variable = communism_seats_parliament
	round_variable = socialist_seats_parliament
	round_variable = Social_Democratic_seats_parliament
	round_variable = democratic_seats_parliament
	round_variable = Social_Liberalism_seats_parliament
	round_variable = Liberal_Conservatism_seats_parliament
	round_variable = conservative_seats_parliament
	round_variable = islamism_seats_parliament
	round_variable = monarchism_seats_parliament
	round_variable = neutrality_seats_parliament
	round_variable = nationalism_seats_parliament
	round_variable = fascism_seats_parliament
	round_variable = Christian_Democratic_seats_parliament
	round_variable = centrist_seats_parliament
	round_variable = liberal_seats_parliament
	round_variable = trotskyism_seats_parliament
	round_variable = maoism_seats_parliament
	round_variable = radical_shiaism_seats_parliament
	round_variable = Salafism_seats_parliament
	
## Step 3 : Divide by 2 (For a graphic of 50 seats)

	divide_variable = { communism_seats_parliament = 2 }
	divide_variable = { socialist_seats_parliament = 2 }
	divide_variable = { Social_Democratic_seats_parliament = 2 }
	divide_variable = { democratic_seats_parliament = 2 }
	divide_variable = { Social_Liberalism_seats_parliament = 2 }
	divide_variable = { Liberal_Conservatism_seats_parliament = 2 }
	divide_variable = { conservative_seats_parliament = 2 }
	divide_variable = { islamism_seats_parliament = 2 }
	divide_variable = { monarchism_seats_parliament = 2 }
	divide_variable = { neutrality_seats_parliament = 2 }
	divide_variable = { nationalism_seats_parliament = 2 }
	divide_variable = { fascism_seats_parliament = 2 }
	
	divide_variable = { Christian_Democratic_seats_parliament = 2 }
	divide_variable = { centrist_seats_parliament = 2 }
	divide_variable = { liberal_seats_parliament = 2 }
	divide_variable = { trotskyism_seats_parliament = 2 }
	divide_variable = { maoism_seats_parliament = 2 }
	divide_variable = { radical_shiaism_seats_parliament = 2 }
	divide_variable = { Salafism_seats_parliament = 2 }

## Step 4 : Round again

	round_variable = communism_seats_parliament
	round_variable = socialist_seats_parliament
	round_variable = Social_Democratic_seats_parliament
	round_variable = democratic_seats_parliament
	round_variable = Social_Liberalism_seats_parliament
	round_variable = Liberal_Conservatism_seats_parliament
	round_variable = conservative_seats_parliament
	round_variable = islamism_seats_parliament
	round_variable = monarchism_seats_parliament
	round_variable = neutrality_seats_parliament
	round_variable = nationalism_seats_parliament
	round_variable = fascism_seats_parliament
	
	round_variable = Christian_Democratic_seats_parliament
	round_variable = centrist_seats_parliament
	round_variable = liberal_seats_parliament
	round_variable = trotskyism_seats_parliament
	round_variable = maoism_seats_parliament
	round_variable = radical_shiaism_seats_parliament
	round_variable = Salafism_seats_parliament
	
## Step 5: Assign seats

	clear_array = ideology_seats_array
	clear_array = parliament_array
	add_to_array = { ideology_seats_array = 0 } # Placeholder, I need the frames to be 1-12 and not 0-11
	add_to_array = { ideology_seats_array = communism_seats_parliament }
	add_to_array = { ideology_seats_array = socialist_seats_parliament }
	add_to_array = { ideology_seats_array = Social_Democratic_seats_parliament }
	add_to_array = { ideology_seats_array = democratic_seats_parliament }
	add_to_array = { ideology_seats_array = Social_Liberalism_seats_parliament }
	add_to_array = { ideology_seats_array = Liberal_Conservatism_seats_parliament }
	add_to_array = { ideology_seats_array = conservative_seats_parliament }
	add_to_array = { ideology_seats_array = islamism_seats_parliament }
	add_to_array = { ideology_seats_array = monarchism_seats_parliament }
	add_to_array = { ideology_seats_array = neutrality_seats_parliament }
	add_to_array = { ideology_seats_array = nationalism_seats_parliament }
	add_to_array = { ideology_seats_array = fascism_seats_parliament }
	add_to_array = { ideology_seats_array = Christian_Democratic_seats_parliament }
	add_to_array = { ideology_seats_array = centrist_seats_parliament }
	add_to_array = { ideology_seats_array = liberal_seats_parliament }
	add_to_array = { ideology_seats_array = trotskyism_seats_parliament }
	add_to_array = { ideology_seats_array = maoism_seats_parliament }
	add_to_array = { ideology_seats_array = radical_shiaism_seats_parliament }
	add_to_array = { ideology_seats_array = Salafism_seats_parliament }
	
	communist_gfx_set = yes
	socialist_gfx_set = yes
	Social_Democratic_gfx_set = yes
	democratic_gfx_set = yes
	Social_Liberalism_gfx_set = yes
	Liberal_Conservatism_gfx_set = yes
	conservative_gfx_set = yes
	islamism_seats_parliament_gfx_set = yes
	monarchism_gfx_set = yes
	neutrality_gfx_set = yes
	nationalism_gfx_set = yes
	fascism_gfx_set = yes
	Christian_Democratic_gfx_set = yes
	centrist_gfx_set = yes
	liberal_gfx_set = yes
	trotskyism_gfx_set = yes
	maoism_gfx_set = yes
	radical_shiaism_gfx_set = yes
	Salafism_gfx_set = yes

}

communist_gfx_set = {
	if = {
		limit = {
			check_variable = { communism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 1 }
		add_to_variable = { communism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { communism_seats_parliament > 0 }
			}	
			communist_gfx_set = yes
		}
	}
}
socialist_gfx_set = {
	if = {
		limit = {
			check_variable = { socialist_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 2 }
		add_to_variable = { socialist_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { socialist_seats_parliament > 0 }
			}	
			socialist_gfx_set = yes
		}
	}
}
Social_Democratic_gfx_set = {
	if = {
		limit = {
			check_variable = { Social_Democratic_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 3 }
		add_to_variable = { Social_Democratic_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { Social_Democratic_seats_parliament > 0 }
			}	
			Social_Democratic_gfx_set = yes
		}
	}
}
democratic_gfx_set = {
	if = {
		limit = {
			check_variable = { democratic_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 4 }
		add_to_variable = { democratic_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { democratic_seats_parliament > 0 }
			}	
			democratic_gfx_set = yes
		}
	}
}
Social_Liberalism_gfx_set = {
	if = {
		limit = {
			check_variable = { Social_Liberalism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 5 }
		add_to_variable = { Social_Liberalism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { Social_Liberalism_seats_parliament > 0 }
			}	
			Social_Liberalism_gfx_set = yes
		}
	}
}
Liberal_Conservatism_gfx_set = {
	if = {
		limit = {
			check_variable = { Liberal_Conservatism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 6 }
		add_to_variable = { Liberal_Conservatism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { Liberal_Conservatism_seats_parliament > 0 }
			}	
			Liberal_Conservatism_gfx_set = yes
		}
	}
}
conservative_gfx_set = {
	if = {
		limit = {
			check_variable = { conservative_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 7 }
		add_to_variable = { conservative_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { conservative_seats_parliament > 0 }
			}	
			conservative_gfx_set = yes
		}
	}
}
islamism_seats_parliament_gfx_set = {
	if = {
		limit = {
			check_variable = { islamism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 8 }
		add_to_variable = { islamism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { islamism_seats_parliament > 0 }
			}	
			islamism_seats_parliament_gfx_set = yes
		}
	}
}
monarchism_gfx_set = {
	if = {
		limit = {
			check_variable = { monarchism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 9 }
		add_to_variable = { monarchism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { monarchism_seats_parliament > 0 }
			}	
			monarchism_gfx_set = yes
		}
	}
}
neutrality_gfx_set = {
	if = {
		limit = {
			check_variable = { neutrality_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 10 }
		add_to_variable = { neutrality_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { neutrality_seats_parliament > 0 }
			}	
			neutrality_gfx_set = yes
		}
	}
}
nationalism_gfx_set = {
	if = {
		limit = {
			check_variable = { nationalism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 11 }
		add_to_variable = { nationalism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { nationalism_seats_parliament > 0 }
			}	
			nationalism_gfx_set = yes
		}
	}
}
fascism_gfx_set = {
	if = {
		limit = {
			check_variable = { fascism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 12 }
		add_to_variable = { fascism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { fascism_seats_parliament > 0 }
			}	
			fascism_gfx_set = yes
		}
	}
}
Christian_Democratic_gfx_set = {
	if = {
		limit = {
			check_variable = { Christian_Democratic_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 13 }
		add_to_variable = { Christian_Democratic_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { Christian_Democratic_seats_parliament > 0 }
			}	
			Christian_Democratic_gfx_set = yes
		}
	}
}
centrist_gfx_set = {
	if = {
		limit = {
			check_variable = { centrist_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 14 }
		add_to_variable = { centrist_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { centrist_seats_parliament > 0 }
			}	
			centrist_gfx_set = yes
		}
	}
}
liberal_gfx_set = {
	if = {
		limit = {
			check_variable = { liberal_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 15 }
		add_to_variable = { liberal_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { liberal_seats_parliament > 0 }
			}	
			liberal_gfx_set = yes
		}
	}
}
trotskyism_gfx_set = {
	if = {
		limit = {
			check_variable = { trotskyism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 16 }
		add_to_variable = { trotskyism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { trotskyism_seats_parliament > 0 }
			}	
			trotskyism_gfx_set = yes
		}
	}
}
maoism_gfx_set = {
	if = {
		limit = {
			check_variable = { maoism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 17 }
		add_to_variable = { maoism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { maoism_seats_parliament > 0 }
			}	
			maoism_gfx_set = yes
		}
	}
}
radical_shiaism_gfx_set = {
	if = {
		limit = {
			check_variable = { radical_shiaism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 18 }
		add_to_variable = { radical_shiaism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { radical_shiaism_seats_parliament > 0 }
			}	
			radical_shiaism_gfx_set = yes
		}
	}
}
Salafism_gfx_set = {
	if = {
		limit = {
			check_variable = { Salafism_seats_parliament > 0 }
		}
		add_to_array = { parliament_array = 19 }
		add_to_variable = { Salafism_seats_parliament = -1 }
		if = {
			limit = {
				check_variable = { Salafism_seats_parliament > 0 }
			}	
			Salafism_gfx_set = yes
		}
	}
}


class_1_senate_calc = {
	set_variable = { class_i_size = 32 }
	set_variable = { total_seats = class_i_size }
	set_variable = { cons_seats_class_i = 0 }
	set_variable = { neocon_seats_class_i = 0 }
	set_variable = { christian_dem_seats_class_i = 0 }
	set_variable = { centre_seats_class_i = 0 }
	set_variable = { libertarian_seats_class_i = 0 }
	
	set_variable = { demsoc_seats_class_i = 0 }
	set_variable = { socdem_seats_class_i = 0 }
	set_variable = { soclib_seats_class_i = 0 }
	set_variable = { marlib_seats_class_i = 0 }
	set_variable = { aut_seats_class_i = 0 }

	subtract_from_variable = { total_sen_dem = class_i_dem }
	subtract_from_variable = { total_sen_gop = class_i_gop }
	
	set_variable = { class_i_dem = 0 }
	set_variable = { class_i_gop = 0 }
	
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_i_size = 1 }
	}

	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_i = 7 }
	subtract_from_variable = { total_seats = 7 }

	#Dixiecrat Safe
	set_variable = { aut_seats_class_i = 7 }
	subtract_from_variable = { total_seats = 7 }

	#New Deal Dem
	add_to_variable = { socdem_seats_class_i = 2 }
	subtract_from_variable = { total_seats = 2 }

	#Tossup
	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	set_variable = { libertarian_pop = party_popularity@liberal } 
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	set_variable = { marlib_pop = party_popularity@democratic } 
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }

	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_i_random = yes
	}	
	add_to_variable = { class_i_gop = cons_seats_class_i }
	add_to_variable = { class_i_gop = neocon_seats_class_i }
	add_to_variable = { class_i_gop = christian_dem_seats_class_i } 
	add_to_variable = { class_i_gop = centre_seats_class_i }
	add_to_variable = { class_i_gop = libertarian_seats_class_i }
	
	add_to_variable = { class_i_dem = demsoc_seats_class_i }
	add_to_variable = { class_i_dem = socdem_seats_class_i }
	add_to_variable = { class_i_dem = soclib_seats_class_i }
	add_to_variable = { class_i_dem = marlib_seats_class_i }
	add_to_variable = { class_i_dem = aut_seats_class_i }	

	add_to_variable = { total_sen_dem = class_i_dem }
	add_to_variable = { total_sen_gop = class_i_gop }
	
}	

class_2_senate_calc = {
	set_variable = { class_ii_size = 32 }
	set_variable = { total_seats = class_ii_size }
	set_variable = { cons_seats_class_ii = 0 }
	set_variable = { neocon_seats_class_ii = 0 }
	set_variable = { christian_dem_seats_class_ii = 0 }
	set_variable = { centre_seats_class_ii = 0 }
	set_variable = { libertarian_seats_class_ii = 0 }
	set_variable = { demsoc_seats_class_ii = 0 }
	set_variable = { socdem_seats_class_ii = 0 }
	set_variable = { soclib_seats_class_ii = 0 }
	set_variable = { marlib_seats_class_ii = 0 }
	set_variable = { aut_seats_class_ii = 0 }
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_ii_size = 1 }
	}
	
	subtract_from_variable = { total_sen_dem = class_ii_dem }
	subtract_from_variable = { total_sen_gop = class_ii_gop }
	
	set_variable = { class_ii_dem = 0 }
	set_variable = { class_ii_gop = 0 }
	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_ii = 5 }
	subtract_from_variable = { total_seats = 5 }

	#Dixiecrat Safe
	set_variable = { aut_seats_class_ii = 9 }
	subtract_from_variable = { total_seats = 9 }

	#New Deal Dem
	add_to_variable = { socdem_seats_class_ii = 4 }
	subtract_from_variable = { total_seats = 4 }

	#New Deal Dem
	add_to_variable = { cons_seats_class_ii = 1 }
	subtract_from_variable = { total_seats = 1 }	
	
	#Tossups
	#Tossup
	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	set_variable = { libertarian_pop = party_popularity@liberal } 
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	set_variable = { marlib_pop = party_popularity@democratic } 
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }
	
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_ii_random = yes
	}	
	
	add_to_variable = { class_ii_gop = cons_seats_class_ii }
	add_to_variable = { class_ii_gop = neocon_seats_class_ii }
	add_to_variable = { class_ii_gop = christian_dem_seats_class_ii } 
	add_to_variable = { class_ii_gop = centre_seats_class_ii }
	add_to_variable = { class_ii_gop = libertarian_seats_class_ii }
	
	add_to_variable = { class_ii_dem = demsoc_seats_class_ii }
	add_to_variable = { class_ii_dem = socdem_seats_class_ii }
	add_to_variable = { class_ii_dem = soclib_seats_class_ii }
	add_to_variable = { class_ii_dem = marlib_seats_class_ii }
	add_to_variable = { class_ii_dem = aut_seats_class_ii }		

	add_to_variable = { total_sen_dem = class_ii_dem }
	add_to_variable = { total_sen_gop = class_ii_gop }	
}	
class_3_senate_calc = {
	set_variable = { class_iii_size = 32 }
	set_variable = { total_seats = class_iii_size }
	set_variable = { cons_seats_class_iii = 0 }
	set_variable = { neocon_seats_class_iii = 0 }
	set_variable = { christian_dem_seats_class_iii = 0 }
	set_variable = { centre_seats_class_iii = 0 }
	set_variable = { libertarian_seats_class_iii = 0 }
	set_variable = { demsoc_seats_class_iii = 0 }
	set_variable = { socdem_seats_class_iii = 0 }
	set_variable = { soclib_seats_class_iii = 0 }
	set_variable = { marlib_seats_class_iii = 0 }
	set_variable = { aut_seats_class_iii = 0 }
	if = {
		limit = {
			has_country_flag = ak_hi_state
		}
		add_to_variable = { class_iii_size = 2 }
	}
	
	subtract_from_variable = { total_sen_dem = class_iii_dem }
	subtract_from_variable = { total_sen_gop = class_iii_gop }
	
	set_variable = { class_iii_dem = 0 }
	set_variable = { class_iii_gop = 0 }
	
	#Liberal GOP Safe
	set_variable = { centre_seats_class_iii = 4 }
	subtract_from_variable = { total_seats = 4 }
	
	#Dixiecrat Safe
	set_variable = { aut_seats_class_iii = 6 }
	subtract_from_variable = { total_seats = 6 }
	
	#Neocon
	add_to_variable = { neocon_seats_class_iii = 4 }
	subtract_from_variable = { total_seats = 4 }

	#Set GOP Nationwide Pop
	set_variable = { gop_pop = 0 } 
	
	set_variable = { cons_pop = party_popularity@conservative } 
	multiply_variable = { cons_pop = 100 }
	set_variable = { neocon_pop = party_popularity@Liberal_Conservatism } 
	multiply_variable = { neocon_pop = 100 }
	set_variable = { christian_dem_pop = party_popularity@Christian_Democratic } 
	multiply_variable = { christian_dem_pop = 100 }
	set_variable = { libertarian_pop = party_popularity@liberal } 
	multiply_variable = { libertarian_pop = 100 }
	
	add_to_variable = { gop_pop = cons_pop }
	add_to_variable = { gop_pop = neocon_pop }
	add_to_variable = { gop_pop = christian_dem_pop }
	add_to_variable = { gop_pop = libertarian_pop }
	
	#Set DEM Nationwide Pop
	set_variable = { dem_pop = 0 } 
	
	set_variable = { demsoc_pop = party_popularity@socialist } 
	multiply_variable = { demsoc_pop = 100 }
	set_variable = { socdem_pop = party_popularity@Social_Democratic } 
	multiply_variable = { socdem_pop = 100 }
	set_variable = { soclib_pop = party_popularity@Social_Liberalism } 
	multiply_variable = { soclib_pop = 100 }
	set_variable = { marlib_pop = party_popularity@democratic } 
	multiply_variable = { marlib_pop = 100 }
	
	add_to_variable = { dem_pop = demsoc_pop }
	add_to_variable = { dem_pop = socdem_pop }
	add_to_variable = { dem_pop = soclib_pop }
	add_to_variable = { dem_pop = marlib_pop }	
	
	#Nationwide Total Ammount
	set_variable = { national_pop = 0 } 
	add_to_variable = { national_pop = dem_pop }
	add_to_variable = { national_pop = gop_pop }
	
	divide_variable = { dem_pop = national_pop }
	divide_variable = { gop_pop = national_pop }
	if = {
		limit = {
			check_variable = { total_seats > 0 }
		}		
		class_iii_random = yes
	}	
	
	add_to_variable = { class_iii_gop = cons_seats_class_iii }
	add_to_variable = { class_iii_gop = neocon_seats_class_iii }
	add_to_variable = { class_iii_gop = christian_dem_seats_class_iii } 
	add_to_variable = { class_iii_gop = centre_seats_class_iii }
	add_to_variable = { class_iii_gop = libertarian_seats_class_iii }
	
	add_to_variable = { class_iii_dem = demsoc_seats_class_iii }
	add_to_variable = { class_iii_dem = socdem_seats_class_iii }
	add_to_variable = { class_iii_dem = soclib_seats_class_iii }
	add_to_variable = { class_iii_dem = marlib_seats_class_iii }
	add_to_variable = { class_iii_dem = aut_seats_class_iii }		

	add_to_variable = { total_sen_dem = class_iii_dem }
	add_to_variable = { total_sen_gop = class_iii_gop }	
}


