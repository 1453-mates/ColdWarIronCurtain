gdpCalc = {
    every_country = {
        set_variable = { cgBase = modifier@consumer_goods_factor  } 
        set_variable = { peBase = modifier@production_factory_max_efficiency_factor } 
        add_to_variable = { peBase = 1 } 
        set_variable = { totCiv = num_of_civilian_factories  } 

         divide_variable = { cgBase = peBase } 
        multiply_variable = { totCiv = cgBase }
        multiply_variable = { totCiv = 4 }
        set_variable = { gdp = totCiv  } 

     }
}

call_nato_america_leader = {
	any_other_country = {
		limit = {
			has_idea = nato_member
			NOT = { is_in_faction_with = USA }
			NOT = { has_war_with = ROOT }
		}
		USA = { add_to_faction = PREV }
	}
	if = { 
		limit = {
			any_other_country = {
				has_idea = nato_member
				NOT = { is_in_faction_with = USA }
				NOT = { has_war_with = ROOT }
			}
			call_nato_america_leader = yes
		}
	}
}