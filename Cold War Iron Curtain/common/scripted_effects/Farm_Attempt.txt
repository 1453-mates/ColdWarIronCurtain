farm_pulse = {
	#Farms
	if = {
		limit = { 
			NOT = { check_variable = { farm_output = 0 } }
		}
		multiply_variable = { farm_output = -1 }  
		meta_effect = {
			text = {
				add_resource = {
					type = rubber
					amount = [AMNT]
				}
			}
			AMNT = "[?farm_output]"
		}	
	}
	set_variable = { farm_output = 0 }
	if = {
		limit = {
			has_state_flag = mountainshot 
		}
		add_to_variable = { farm_output = -0.5 }  
	}	
	if = {
		limit = {
			has_state_flag = cold 
		}
		add_to_variable = { farm_output = 0 }  
	}	
	if = {
		limit = {
			has_state_flag = desert 
		}
		add_to_variable = { farm_output = 0 }  
	}	
	if = {
		limit = {
			has_state_flag = lushdesert 
		}
		add_to_variable = { farm_output = 1 }  
	}	
	if = {
		limit = {
			has_state_flag = mountains 
		}
		add_to_variable = { farm_output = 1 }  
	}	
	if = {
		limit = {
			has_state_flag = boreal 
		}
		add_to_variable = { farm_output = 2 }  
	}	
	if = {
		limit = {
			has_state_flag = temperate 
		}
		add_to_variable = { farm_output = 3 }  
	}	
	if = {
		limit = {
			has_state_flag = tropical 
		}
		add_to_variable = { farm_output = 5 }  
	}	
	#Tech Modifiers
	if = {
		limit = {
			controller = {
				has_tech = agriculture_I
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	if = {
		limit = {
			controller = {
				has_tech = agriculture_II
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	if = {
		limit = {
			controller = {
				has_tech = agriculture_III
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	if = {
		limit = {
			controller = {
				has_tech = agriculture_IV
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	if = {
		limit = {
			controller = {
				has_tech = agriculture_V
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	if = {
		limit = {
			controller = {
				has_tech = agriculture_VI
			}
		}
		multiply_variable = { farm_output = 1.15 }  
	}
	
	#Water Infra Modifiers
	if = {
		limit = {
			water_infrastructure < 1
		}
		multiply_variable = { farm_output = 0.5 }  
	}		
	if = {
		limit = {
			water_infrastructure < 3
			water_infrastructure > 1
		}
		multiply_variable = { farm_output = 1.25 }  
	}		
	if = {
		limit = {
			water_infrastructure < 4
			water_infrastructure > 2
		}
		multiply_variable = { farm_output = 1.5 }  
	}	
	if = {
		limit = {
			water_infrastructure > 3
		}
		multiply_variable = { farm_output = 1.75 }  
	}
	multiply_variable = { farm_output = building_level@agri_industrial_complex }
	meta_effect = {
		text = {
			add_resource = {
				type = rubber
				amount = [AMNT]
			}
		}
		AMNT = "[?farm_output]"
	}	
}

Food_Need_Pulse = {
	if = {
		limit = { 
			NOT = { check_variable = { food_consumption = 0 } }
		}
		multiply_variable = { food_consumption = -1 }  
		meta_effect = {
			text = {
				add_resource = {
					type = rubber
					amount = [AMNT]
				}
			}
			AMNT = "[?food_consumption]"
		}	
	}
	if = {
		limit = {
			has_state_category = pop1
		}
		set_variable = food_consumption = 0.5
	}
	else_if = {
		limit = {
			has_state_category = pop2
		}
		set_variable = food_consumption = 1
	}
	else_if = {
		limit = {
			has_state_category = pop3
		}
		set_variable = food_consumption = 1.5
	}
	else_if = {
		limit = {
			has_state_category = pop4
		}
		set_variable = food_consumption = 2
	}
	else_if = {
		limit = {
			has_state_category = pop5
		}
		set_variable = food_consumption = 2.5
	}
	else_if = {
		limit = {
			has_state_category = pop7
		}
		set_variable = food_consumption = 3
	}
	else_if = {
		limit = {
			has_state_category = pop10
		}
		set_variable = food_consumption = 4
	}
	else_if = {
		limit = {
			has_state_category = pop15
		}
		set_variable = food_consumption = 6
	}
	else_if = {
		limit = {
			has_state_category = pop20
		}
		set_variable = food_consumption = 7.5
	}
	else_if = {
		limit = {
			has_state_category = pop1dev1
		}
		set_variable = food_consumption = 1
	}
	else_if = {
		limit = {
			has_state_category = pop2dev1
		}
		set_variable = food_consumption = 2
	}
	else_if = {
		limit = {
			has_state_category = pop3dev1
		}
		set_variable = food_consumption = 3
	}
	else_if = {
		limit = {
			has_state_category = pop4dev1
		}
		set_variable = food_consumption = 4
	}
	else_if = {
		limit = {
			has_state_category = pop5dev1
		}
		set_variable = food_consumption = 5
	}
	else_if = {
		limit = {
			has_state_category = pop7dev1
		}
		set_variable = food_consumption = 6
	}
	else_if = {
		limit = {
			has_state_category = pop10dev1
		}
		set_variable = food_consumption = 8
	}
	else_if = {
		limit = {
			has_state_category = pop15dev1
		}
		set_variable = food_consumption = 12
	}
	else_if = {
		limit = {
			has_state_category = pop20dev1
		}
		set_variable = food_consumption = 15
	}
	#Dev 2
	else_if = {
		limit = {
			has_state_category = pop1dev2
		}
		set_variable = food_consumption = 1
	}
	else_if = {
		limit = {
			has_state_category = pop2dev2
		}
		set_variable = food_consumption = 2
	}
	else_if = {
		limit = {
			has_state_category = pop3dev2
		}
		set_variable = food_consumption = 3
	}
	else_if = {
		limit = {
			has_state_category = pop4dev2
		}
		set_variable = food_consumption = 4
	}
	else_if = {
		limit = {
			has_state_category = pop5dev2
		}
		set_variable = food_consumption = 5
	}
	else_if = {
		limit = {
			has_state_category = pop7dev2
		}
		set_variable = food_consumption = 6
	}
	else_if = {
		limit = {
			has_state_category = pop10dev2
		}
		set_variable = food_consumption = 8
	}
	else_if = {
		limit = {
			has_state_category = pop15dev2
		}
		set_variable = food_consumption = 12
	}
	else_if = {
		limit = {
			has_state_category = pop20dev2
		}
		set_variable = food_consumption = 15
	}
	#Dev 3
	else_if = {
		limit = {
			has_state_category = pop1dev3
		}
		set_variable = food_consumption = 2
	}
	else_if = {
		limit = {
			has_state_category = pop2dev3
		}
		set_variable = food_consumption = 4
	}
	else_if = {
		limit = {
			has_state_category = pop3dev3
		}
		set_variable = food_consumption = 6
	}
	else_if = {
		limit = {
			has_state_category = pop4dev3
		}
		set_variable = food_consumption = 8
	}
	else_if = {
		limit = {
			has_state_category = pop5dev3
		}
		set_variable = food_consumption = 10
	}
	else_if = {
		limit = {
			has_state_category = pop7dev3
		}
		set_variable = food_consumption = 12
	}
	else_if = {
		limit = {
			has_state_category = pop10dev3
		}
		set_variable = food_consumption = 16
	}
	else_if = {
		limit = {
			has_state_category = pop15dev3
		}
		set_variable = food_consumption = 24
	}
	else_if = {
		limit = {
			has_state_category = pop20dev3
		}
		set_variable = food_consumption = 30
	}
	#dev4
	else_if = {
		limit = {
			has_state_category = pop20dev4
		}
		set_variable = food_consumption = 30

	}
	else_if = {
		limit = {
			has_state_category = pop2dev4
		}
		set_variable = food_consumption = 4
	}
	else_if = {
		limit = {
			has_state_category = pop3dev4
		}
		set_variable = food_consumption = 6
	}
	else_if = {
		limit = {
			has_state_category = pop4dev4
		}
		set_variable = food_consumption = 8
	}
	else_if = {
		limit = {
			has_state_category = pop5dev4
		}
		set_variable = food_consumption = 10
	}
	else_if = {
		limit = {
			has_state_category = pop7dev4
		}
		set_variable = food_consumption = 12
	}
	else_if = {
		limit = {
			has_state_category = pop10dev4
		}
		set_variable = food_consumption = 16
	}
	else_if = {
		limit = {
			has_state_category = pop15dev4
		}
		set_variable = food_consumption = 24
	}
	else = {
		set_variable = food_consumption = 2
	}
	meta_effect = {
		text = {
			add_resource = {
				type = rubber
				amount = [AMNT]
			}
		}
		AMNT = "[?food_consumption]"
	}	
}